{% load static %}

<nav class="navbar navbar-expand regulate-navbar"
     role="navigation"
     aria-label="Main navigation">

    <div class="container d-flex align-items-center">

        <!-- Left: Logo / Home -->
        <a class="navbar-brand d-flex align-items-center"
           href="{% url 'home' %}"
           aria-label="Go to Regulate home page">

            <img src="{% static 'images/bug-logo.png' %}"
                 alt="Regulate Logo"
                 class="nav-logo">
        </a>

        <!-- Middle: App name -->
        <div class="flex-grow-1 regulate-navbar-logo">
            <span class="nav-title">Regulate.</span>
        </div>

        <!-- Right: Account / Auth buttons -->
        <div class="d-flex align-items-center">

            {% if user.is_authenticated %}

            <!-- My Account Dropdown -->
            <div class="dropdown">
                <button class="btn dropdown-toggle regulate-btn"
                        type="button"
                        id="profileDropdown"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        aria-haspopup="true"
                        aria-label="Open profile options menu">
                    My Account
                </button>

                <ul class="dropdown-menu dropdown-menu-end regulate-dropdown"
                    aria-labelledby="profileDropdown"
                    role="menu">

                    <!-- New Entry (TOP) -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'new_entry' %}"
                           role="menuitem"
                           aria-label="Create a new mood entry">
                            New Entry
                        </a>
                    </li>

                    <li><hr class="dropdown-divider"></li>

                    <!-- Dashboard -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'dashboard' %}"
                           role="menuitem"
                           aria-label="Go to your dashboard">
                            My Dashboard
                        </a>
                    </li>

                    <li><hr class="dropdown-divider"></li>

                    <!-- Regulate+ -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'regulate_plus' %}"
                           role="menuitem"
                           aria-label="View Regulate+ subscription and billing options">
                            Regulate+
                        </a>
                    </li>

                    <li><hr class="dropdown-divider"></li>

                    <!-- Profile -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'profile' %}"
                           role="menuitem"
                           aria-label="View and manage your profile settings">
                            My Profile
                        </a>
                    </li>

                    <li><hr class="dropdown-divider"></li>

                    <!-- Logout -->
                    <li role="none">
                        <form method="post"
                              action="{% url 'account_logout' %}"
                              class="px-3 py-2">
                            {% csrf_token %}
                            <button type="submit"
                                    class="btn btn-danger w-100 regulate-logout-btn">
                                Logout
                            </button>
                        </form>
                    </li>

                </ul>
            </div>

            {% else %}

            <a class="btn regulate-btn me-2"
               href="{% url 'account_login' %}"
               aria-label="Sign in to Regulate">
                Sign In
            </a>

            <a class="btn regulate-btn"
               href="{% url 'account_signup' %}"
               aria-label="Create a Regulate account">
                Sign Up
            </a>

            {% endif %}

        </div>
    </div>
</nav>
