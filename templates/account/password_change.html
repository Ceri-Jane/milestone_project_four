{% extends "base.html" %}
{% load static %}

{% block meta_description %}
<meta name="description" content="Change the password associated with your Regulate account.">
{% endblock %}

{% block meta_keywords %}
<meta name="keywords" content="change password, account security, regulate">
{% endblock %}

{% block title %}
<title>Regulate | Change Password</title>
{% endblock %}

{% block content %}
<div class="form-wrapper">
    <div class="form-card">

        <h1 class="form-title">Change Password</h1>

        <p class="form-info">
            Enter your current password and choose a new one.
        </p>

        <!-- Password change form -->
        <form method="post">
            {% csrf_token %}

            {{ form.non_field_errors }}

            {% for field in form %}
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>

                <div class="password-field">
                    {{ field }}

                    {% if field.field.widget.input_type == "password" %}
                        <button
                            type="button"
                            class="toggle-password-btn"
                            data-target="{{ field.id_for_label }}"
                            aria-label="Show password">

                            <!-- VALID W3C SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="24"
                                 height="24"
                                 viewBox="0 0 16 16"
                                 aria-hidden="true"
                                 focusable="false">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8z"></path>
                                <path d="M8 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"></path>
                            </svg>
                        </button>
                    {% endif %}
                </div>

                {% if field.help_text %}
                    <div id="{{ field.id_for_label }}_helptext"
                         class="form-text text-muted">
                        {{ field.help_text|safe }}
                    </div>
                {% endif %}

                {% if field.errors %}
                    <p class="form-error">{{ field.errors|striptags }}</p>
                {% endif %}
            {% endfor %}

            <button type="submit" class="select-btn">
                Change Password
            </button>
        </form>

        <div class="auth-extra">
            <p>
                <a href="{% url 'account_reset_password' %}" class="custom-link">
                    Forgot your password?
                </a>
            </p>
            <p>
                <a href="{% url 'profile' %}">Back to Profile</a>
            </p>
        </div>

    </div>
</div>
{% endblock %}
