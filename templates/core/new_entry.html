{% extends "base.html" %}
{% load static %}

{# Page-specific SEO overrides: custom title + meta tags #}

{% block meta_description %}
<meta name="description" content="Create a new entry with optional notes, mood input, and emotion word tags.">
{% endblock %}

{% block meta_keywords %}
<meta name="keywords" content="new entry, add entry, emotion tracking, mood notes, emotion tags, regulate">
{% endblock %}

{% block title %}
<title>Regulate | New Entry</title>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/entry.css' %}">

<div class="form-wrapper">
    <div class="form-card">

        <!-- Entry Title -->
        <h1 class="form-title">New Entry</h1>

        <form method="post">
            {% csrf_token %}

            <!-- Timestamp -->
            {% if timestamp %}
                <p class="form-info">Entry at: {{ timestamp }}</p>
            {% endif %}

            <!-- Mood Hue -->
            <label for="hue">Mood Hue</label>
            <div class="hue-slider-wrapper">
                <input type="range" id="hue" name="hue" min="0" max="100" class="hue-slider">
            </div>
            <p class="form-section-hint">
                Move the slider to pick a colour that matches how you feel.
            </p>

            <label for="hue_notes">What does this hue mean today? (optional)</label>
            <textarea id="hue_notes" name="hue_notes" rows="3"
                placeholder="Describe the feelings behind choosing this hue..."></textarea>
                
                <!-- Emotion Words -->
                <label for="emotion-search">Emotion Words (optional)</label>
                <p class="form-section-hint">
                    Start typing to filter the list, then tick any words that fit.
                </p>

                <div class="emotion-select-wrapper">

                    <!-- Search bar -->
                    <input 
                        type="text"
                        id="emotion-search"
                        class="search-input"
                        placeholder="Search emotions..."
                    >

                    <!-- Scrollable checkbox list -->
                    <div class="emotion-list" id="emotion-list">
                        {% for word in emotions %}
                        <label class="emotion-item">
                            <input type="checkbox" name="emotion_words" value="{{ word.word }}">
                            <span>{{ word.word }}</span>
                        </label>
                        {% endfor %}
                    </div>

                    <p class="emotion-helper">
                        Tick as many feelings as you like — this helps you spot patterns over time.<br>
                        You don’t have to pick any words if you don’t want to.
                    </p>
                </div>

            <!-- Notes for the Day -->
            <label for="notes">Notes for the day (optional)</label>
            <textarea id="notes" name="notes" rows="4" class="notes-box"
                placeholder="Write anything else you want to reflect on today..."></textarea>

            <!-- Save Entry Button -->
            <button type="submit" class="select-btn">Save Entry</button>
        </form>

    </div>
</div>

{% endblock %}
